<h1>Hi</h1>

<script>
    document.getElementById("fetchData").addEventListener("click", function () {
        const url = "http://127.0.0.1:8420/api/book/"; // Replace "car" with "book"

        fetch(url)
            .then(response => response.json())
            .then(data => {
                const bookTable = document.getElementById("bookTable"); // Replace "carTable" with "bookTable"
                bookTable.innerHTML = ""; // Clear previous table

                if (data.length === 0) {
                    bookTable.textContent = "No books found."; // Replace "No cars found." with "No books found."
                } else {
                    const table = document.createElement("table");
                    table.border = "1";

                    const headerRow = document.createElement("tr");
                    ['make', 'model', 'year', 'fuel', 'cylinders'].forEach(key => {
                        const th = document.createElement("th");
                        th.textContent = key.charAt(0).toUpperCase() + key.slice(1); // Capitalize first letter of keys
                        headerRow.appendChild(th);
                    });
                    table.appendChild(headerRow);

                    data.forEach(book => {
                        const row = document.createElement("tr");
                        ['make', 'model', 'year', 'fuel', 'cylinders'].forEach(key => {
                            const cell = document.createElement("td");
                            cell.textContent = book[key];
                            row.appendChild(cell);
                        });
                        table.appendChild(row);
                    });

                    bookTable.appendChild(table);
                }
            })
            .catch(error => {
                console.error("Error:", error);
            });
    });

    document.getElementById("searchBook").addEventListener("click", function () { // Replace "searchCar" with "searchBook"
        const modelInput = document.getElementById("modelInput").value.toLowerCase();
        const rows = document.querySelectorAll("#bookTable table tr"); // Replace "carTable" with "bookTable"

        let bookFound = false; // Replace "carFound" with "bookFound"
        rows.forEach(row => {
            const modelCell = row.querySelector("td:nth-child(2)"); // Assuming model is the second column
            if (modelCell && modelCell.textContent.toLowerCase() === modelInput) {
                row.style.backgroundColor = "yellow"; // Highlight the row
                bookFound = true; // Replace "carFound" with "bookFound"
            } else {
                row.remove(); // Remove rows that do not match the searched book model
            }
        });

        // if (!bookFound) {
        //     alert("Book not found.");
        // }
    });

    function getQueryParams() {
        const params = new URLSearchParams(window.location.search);
        const bookName = params.get('bookName'); // Replace "carName" with "bookName"

        // Use the parameters as needed
        console.log(`Book Name: ${bookName}`);

        // You can also update HTML elements with these values
        document.getElementById('book-name').textContent = `Book: ${bookName}`; // Replace "car-name" with "book-name"
    }

    // Call the function when the page loads
</script>
<script>
    document.getElementById("fetchData").click();
    // Get the bookName parameter from the URL
    const urlParams = new URLSearchParams(window.location.search);
    const bookName = urlParams.get('bookName'); // Replace "carName" with "bookName"
    // Pre-fill the input field with the bookName parameter
    document.getElementById("modelInput").value = bookName; // Replace "carName" with "bookName"

    // Call the search function programmatically

    document.getElementById("searchBook").click(); // Replace "searchCar" with "searchBook"
</script>


<button type="button">Extend Text!</button>